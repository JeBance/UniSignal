{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/trading-signal-v1.schema.json",
  "title": "Trading Signal",
  "description": "–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –¥–ª—è WebSocket –∫–ª–∏–µ–Ω—Ç–æ–≤",
  "version": "1.0.0",
  "type": "object",
  "required": [
    "signal_id",
    "timestamp",
    "source",
    "signal"
  ],
  "properties": {
    "signal_id": {
      "type": "string",
      "format": "uuid",
      "description": "–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–∏–≥–Ω–∞–ª–∞ (UUID v4)",
      "example": "550e8400-e29b-41d4-a716-446655440000"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "–í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–∞ —Å–µ—Ä–≤–µ—Ä–æ–º (ISO8601 UTC)",
      "example": "2026-02-27T11:00:08Z"
    },
    "source": {
      "type": "object",
      "description": "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏—Å—Ç–æ—á–Ω–∏–∫–µ —Å–∏–≥–Ω–∞–ª–∞",
      "required": [
        "channel",
        "channel_id",
        "message_id",
        "original_text"
      ],
      "properties": {
        "channel": {
          "type": "string",
          "description": "–ù–∞–∑–≤–∞–Ω–∏–µ Telegram-–∫–∞–Ω–∞–ª–∞",
          "enum": [
            "VasyaBTC-Signals üü¢üî¥",
            "ASFunding_bot",
            "JeBance",
            "AutoScalping"
          ],
          "example": "VasyaBTC-Signals üü¢üî¥"
        },
        "channel_id": {
          "type": "integer",
          "description": "ID –∫–∞–Ω–∞–ª–∞ Telegram",
          "example": 2678035223
        },
        "sender_name": {
          "type": "string",
          "description": "–ò–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è",
          "example": "VasyaBTC_Signals"
        },
        "message_id": {
          "type": "integer",
          "description": "ID —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram",
          "example": 17689
        },
        "message_date": {
          "type": "string",
          "format": "date-time",
          "description": "–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —Å–æ–æ–±—â–µ–Ω–∏—è (ISO8601 UTC)",
          "example": "2026-02-27T11:00:07Z"
        },
        "original_text": {
          "type": "string",
          "description": "–ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è",
          "maxLength": 4096,
          "example": "#XRPUSDT #MediumSignal\nBINANCE, 2026-2-27, T10:0:0 UTC\n..."
        },
        "has_media": {
          "type": "boolean",
          "description": "–ù–∞–ª–∏—á–∏–µ –º–µ–¥–∏–∞ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏",
          "example": false
        },
        "media": {
          "type": "array",
          "description": "–ú–∞—Å—Å–∏–≤ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å)",
          "items": {
            "type": "object",
            "required": ["file_id", "file_type"],
            "properties": {
              "file_id": {
                "type": "string",
                "description": "Telegram file ID"
              },
              "file_type": {
                "type": "string",
                "enum": ["photo", "document", "video", "audio"],
                "description": "–¢–∏–ø –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞"
              },
              "file_name": {
                "type": "string",
                "description": "–ò–º—è —Ñ–∞–π–ª–∞"
              },
              "file_size": {
                "type": "integer",
                "description": "–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö"
              },
              "url": {
                "type": "string",
                "format": "uri",
                "description": "–°—Å—ã–ª–∫–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞)"
              }
            }
          }
        }
      }
    },
    "signal": {
      "type": "object",
      "description": "–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏–≥–Ω–∞–ª–µ",
      "required": [
        "type",
        "instrument"
      ],
      "properties": {
        "type": {
          "type": "string",
          "description": "–¢–∏–ø —Å–∏–≥–Ω–∞–ª–∞",
          "enum": [
            "strong_signal",
            "medium_signal",
            "sentiment",
            "entry_signal",
            "quick_target",
            "funding_rate"
          ],
          "example": "strong_signal"
        },
        "priority": {
          "type": "integer",
          "description": "–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–∏–≥–Ω–∞–ª–∞ (1 - –≤—ã—Å—à–∏–π)",
          "minimum": 1,
          "maximum": 5,
          "example": 1
        },
        "instrument": {
          "type": "object",
          "description": "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ—Ä–≥–æ–≤–æ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–µ",
          "required": [
            "ticker",
            "exchange"
          ],
          "properties": {
            "ticker": {
              "type": "string",
              "description": "–¢–∏–∫–µ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞",
              "pattern": "^[A-Z]{2,10}$",
              "example": "XRPUSDT"
            },
            "exchange": {
              "type": "string",
              "description": "–ë–∏—Ä–∂–∞",
              "enum": [
                "BINANCE",
                "BYBIT",
                "MEXC",
                "BATS"
              ],
              "example": "BINANCE"
            },
            "project_info": {
              "type": "string",
              "description": "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ (–Ω–∞–∑–≤–∞–Ω–∏–µ, —Å—Ç—Ä–∞–Ω–∞, –∫–æ–º–ø–∞–Ω–∏—è)",
              "example": "Ripple, USA, Ripple Labs"
            },
            "asset_type": {
              "type": "string",
              "description": "–¢–∏–ø –∞–∫—Ç–∏–≤–∞",
              "enum": [
                "crypto",
                "stock",
                "forex",
                "commodity"
              ],
              "example": "crypto"
            }
          }
        },
        "timing": {
          "type": "object",
          "description": "–í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã",
          "properties": {
            "timeframe": {
              "type": "string",
              "description": "–¢–∞–π–º—Ñ—Ä–µ–π–º –∞–Ω–∞–ª–∏–∑–∞",
              "enum": [
                "1min",
                "3min",
                "5min",
                "15min",
                "30min",
                "1h",
                "2h",
                "4h",
                "12h",
                "1d",
                "1w"
              ],
              "example": "1h"
            },
            "signal_time": {
              "type": "string",
              "format": "date-time",
              "description": "–í—Ä–µ–º—è —Å–∏–≥–Ω–∞–ª–∞ (ISO8601 UTC)",
              "example": "2026-02-27T10:00:00Z"
            },
            "expires_at": {
              "type": "string",
              "format": "date-time",
              "description": "–í—Ä–µ–º—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ —Å–∏–≥–Ω–∞–ª–∞ (ISO8601 UTC)",
              "example": "2026-02-27T12:00:00Z"
            }
          }
        },
        "direction": {
          "type": "object",
          "description": "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ —Å–∏–ª–∞ —Å–∏–≥–Ω–∞–ª–∞",
          "properties": {
            "side": {
              "type": "string",
              "description": "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏",
              "enum": [
                "long",
                "short",
                "neutral"
              ],
              "example": "short"
            },
            "strength": {
              "type": "string",
              "description": "–°–∏–ª–∞ —Å–∏–≥–Ω–∞–ª–∞",
              "enum": [
                "strong",
                "medium",
                "weak"
              ],
              "example": "medium"
            },
            "pattern": {
              "type": "string",
              "description": "–¢–æ—Ä–≥–æ–≤—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω",
              "enum": [
                "trend_reversal",
                "ob_reversal",
                "os_reversal",
                "breakout",
                "pullback",
                "divergence",
                "unknown"
              ],
              "example": "ob_reversal"
            },
            "pattern_strength": {
              "type": "number",
              "description": "–°–∏–ª–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö",
              "minimum": 0,
              "maximum": 100,
              "example": 30.8
            },
            "pattern_direction": {
              "type": "string",
              "description": "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞",
              "enum": [
                "up",
                "down",
                "neutral"
              ],
              "example": "down"
            }
          }
        },
        "indicators": {
          "type": "object",
          "description": "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã",
          "properties": {
            "rsi": {
              "type": "number",
              "description": "RSI (Relative Strength Index)",
              "minimum": 0,
              "maximum": 100,
              "example": 40
            },
            "rsi_signal": {
              "type": "string",
              "description": "–°–∏–≥–Ω–∞–ª RSI",
              "enum": [
                "oversold",
                "overbought",
                "neutral"
              ],
              "example": "oversold"
            },
            "sentiment": {
              "type": "object",
              "description": "–°–µ–Ω—Ç–∏–º–µ–Ω—Ç-–∞–Ω–∞–ª–∏–∑ (–¥–ª—è —Ç–∏–ø–∞ sentiment)",
              "properties": {
                "day_change": {
                  "type": "number",
                  "description": "–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞ –¥–µ–Ω—å (%)",
                  "example": -0.7
                },
                "change_24h": {
                  "type": "number",
                  "description": "–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞ 24 —á–∞—Å–∞ (%)",
                  "example": -0.7
                },
                "timeframe_zones": {
                  "type": "array",
                  "description": "–ó–æ–Ω—ã –ø–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞–º",
                  "items": {
                    "type": "object",
                    "required": [
                      "timeframe",
                      "zone",
                      "zone_percent"
                    ],
                    "properties": {
                      "timeframe": {
                        "type": "string",
                        "example": "5min"
                      },
                      "zone": {
                        "type": "string",
                        "enum": [
                          "OS",
                          "OB"
                        ],
                        "description": "OS=Oversold, OB=Overbought",
                        "example": "OS"
                      },
                      "zone_percent": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 100,
                        "example": 59
                      },
                      "rsi": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 100,
                        "example": 49.6
                      },
                      "trend": {
                        "type": "string",
                        "enum": [
                          "up",
                          "down",
                          "neutral"
                        ],
                        "example": "neutral"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "trade_setup": {
          "type": "object",
          "description": "–¢–æ—Ä–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–¥–ª—è entry_signal, quick_target)",
          "properties": {
            "entry_price": {
              "type": "number",
              "description": "–¶–µ–Ω–∞ –≤—Ö–æ–¥–∞",
              "minimum": 0,
              "example": 1.3889
            },
            "current_price": {
              "type": "number",
              "description": "–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞",
              "minimum": 0,
              "example": 1.3889
            },
            "targets": {
              "type": "array",
              "description": "–¶–µ–ª–∏ (—Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç)",
              "items": {
                "type": "number",
                "minimum": 0
              },
              "minItems": 1,
              "maxItems": 5,
              "example": [
                1.375,
                1.365
              ]
            },
            "stop_loss": {
              "type": "object",
              "description": "–°—Ç–æ–ø-–ª–æ—Å—Å —É—Ä–æ–≤–Ω–∏",
              "properties": {
                "stop_0_5": {
                  "type": "number",
                  "description": "–°—Ç–æ–ø –ø—Ä–∏ 0.5% –¥–≤–∏–∂–µ–Ω–∏—è",
                  "minimum": 0,
                  "example": 1.3958
                },
                "stop_1": {
                  "type": "number",
                  "description": "–°—Ç–æ–ø –ø—Ä–∏ 1% –¥–≤–∏–∂–µ–Ω–∏—è",
                  "minimum": 0,
                  "example": 1.4027
                },
                "stop_manual": {
                  "type": "number",
                  "description": "–†—É—á–Ω–æ–π —Å—Ç–æ–ø-–ª–æ—Å—Å",
                  "minimum": 0,
                  "example": 1.41
                }
              }
            },
            "expected_profit": {
              "type": "string",
              "description": "–û–∂–∏–¥–∞–µ–º–∞—è –ø—Ä–∏–±—ã–ª—å (–≤ –ø—É–Ω–∫—Ç–∞—Ö –∏–ª–∏ %)",
              "example": "2.11 - 3.14"
            },
            "progress_to_target": {
              "type": "string",
              "description": "–ü—Ä–æ–≥—Ä–µ—Å—Å –¥–æ —Ü–µ–ª–∏ (%)",
              "example": "0.34% - 0.5%"
            },
            "risk_reward_ratio": {
              "type": "number",
              "description": "–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ä–∏—Å–∫/–ø—Ä–∏–±—ã–ª—å",
              "minimum": 0,
              "example": 2.5
            }
          }
        },
        "funding_info": {
          "type": "object",
          "description": "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–Ω–¥–∏–Ω–≥–µ (–¥–ª—è funding_rate)",
          "properties": {
            "funding_rate": {
              "type": "number",
              "description": "–°—Ç–∞–≤–∫–∞ —Ñ–∞–Ω–¥–∏–Ω–≥–∞ (%)",
              "example": -0.6
            },
            "funding_time": {
              "type": "string",
              "format": "date-time",
              "description": "–í—Ä–µ–º—è —Ñ–∞–Ω–¥–∏–Ω–≥–∞ (ISO8601 UTC)",
              "example": "2026-02-27T13:00:00Z"
            },
            "receiver": {
              "type": "string",
              "description": "–ö—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç —Ñ–∞–Ω–¥–∏–Ω–≥",
              "enum": [
                "longs",
                "shorts"
              ],
              "example": "longs"
            },
            "recommended_action": {
              "type": "string",
              "description": "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ",
              "enum": [
                "long",
                "short",
                "neutral"
              ],
              "example": "long"
            },
            "trading_link": {
              "type": "string",
              "format": "uri",
              "description": "–°—Å—ã–ª–∫–∞ –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏",
              "example": "https://www.bybit.com/trade/usdt/NEWTUSDT"
            },
            "next_funding_in": {
              "type": "integer",
              "description": "–°–µ–∫—É–Ω–¥ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ñ–∞–Ω–¥–∏–Ω–≥–∞",
              "minimum": 0,
              "example": 3600
            }
          }
        },
        "confidence": {
          "type": "object",
          "description": "–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å —Å–∏–≥–Ω–∞–ª–∞",
          "properties": {
            "score": {
              "type": "number",
              "description": "–û–±—â–∏–π score —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (0-100)",
              "minimum": 0,
              "maximum": 100,
              "example": 75.5
            },
            "factors": {
              "type": "array",
              "description": "–§–∞–∫—Ç–æ—Ä—ã, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å",
              "items": {
                "type": "string"
              },
              "example": [
                "RSI –≤ –∑–æ–Ω–µ –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç–∏",
                "–ü–∞—Ç—Ç–µ—Ä–Ω —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω",
                "–û–±—ä—ë–º –≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ"
              ]
            }
          }
        }
      }
    },
    "metadata": {
      "type": "object",
      "description": "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ",
      "properties": {
        "parser_version": {
          "type": "string",
          "description": "–í–µ—Ä—Å–∏—è –ø–∞—Ä—Å–µ—Ä–∞",
          "example": "1.0.0"
        },
        "processing_time_ms": {
          "type": "integer",
          "description": "–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–º—Å)",
          "example": 15
        },
        "language": {
          "type": "string",
          "description": "–Ø–∑—ã–∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è",
          "enum": [
            "en",
            "ru",
            "mixed"
          ],
          "example": "en"
        },
        "tags": {
          "type": "array",
          "description": "–¢–µ–≥–∏ —Å–∏–≥–Ω–∞–ª–∞",
          "items": {
            "type": "string"
          },
          "example": [
            "reversal",
            "crypto",
            "binance"
          ]
        },
        "warnings": {
          "type": "array",
          "description": "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–∞",
          "items": {
            "type": "string"
          },
          "example": [
            "–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—è –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω—ã",
            "–ú–µ–¥–∏–∞—Ñ–∞–π–ª –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω"
          ]
        }
      }
    }
  },
  "oneOf": [
    {
      "title": "Strong/Medium Signal",
      "if": {
        "properties": {
          "signal": {
            "properties": {
              "type": {
                "enum": [
                  "strong_signal",
                  "medium_signal"
                ]
              }
            }
          }
        }
      },
      "then": {
        "properties": {
          "signal": {
            "required": [
              "type",
              "instrument",
              "direction"
            ],
            "properties": {
              "direction": {
                "required": [
                  "side",
                  "strength"
                ]
              }
            }
          }
        }
      }
    },
    {
      "title": "Entry Signal",
      "if": {
        "properties": {
          "signal": {
            "properties": {
              "type": {
                "enum": [
                  "entry_signal",
                  "quick_target"
                ]
              }
            }
          }
        }
      },
      "then": {
        "properties": {
          "signal": {
            "required": [
              "type",
              "instrument",
              "trade_setup"
            ],
            "properties": {
              "trade_setup": {
                "required": [
                  "entry_price",
                  "targets"
                ]
              }
            }
          }
        }
      }
    },
    {
      "title": "Funding Rate Signal",
      "if": {
        "properties": {
          "signal": {
            "properties": {
              "type": {
                "enum": [
                  "funding_rate"
                ]
              }
            }
          }
        }
      },
      "then": {
        "properties": {
          "signal": {
            "required": [
              "type",
              "instrument",
              "funding_info"
            ],
            "properties": {
              "funding_info": {
                "required": [
                  "funding_rate",
                  "funding_time",
                  "receiver"
                ]
              }
            }
          }
        }
      }
    }
  ]
}
